<ul ngbNav #nav="ngbNav" class="nav-tabs nav-fill">
  <li ngbNavItem *ngIf="!userIsDeleted">
    <a ngbNavLink>Overview</a>
    <ng-template ngbNavContent>
      <app-post *ngFor="let post of posts" [post]="post"></app-post>
      <div *ngFor="let comment of comments">
        <div class="comment">
          <div class="username">
            <a routerLink="/user/comment.username">
              {{comment.username}}
            </a>
          </div>
          <b>{{comment.text}}</b>
        </div>
        <hr>
      </div>
    </ng-template>
  </li>
  <li ngbNavItem *ngIf="!userIsDeleted">
    <a ngbNavLink>Posts</a>
    <ng-template ngbNavContent>
      <app-post *ngFor="let post of posts" [post]="post"></app-post>
    </ng-template>
  </li>
  <li ngbNavItem *ngIf="!userIsDeleted">
    <a ngbNavLink>Comments</a>
    <ng-template ngbNavContent>
      <div class="mb-3">
        <div *ngFor="let postId of unique(comments)" class="mt-3">
          <div class="comments">
            <div class="p-3 comments-header">
              <a class="comments-header-link" [routerLink]="'/user/' + getUsername()">
                {{getUsername()}}
              </a>
              commented on
              <a class="comments-header-link" [routerLink]="'/post/' + findPost(postId)!.id">
                {{findPost(postId)!.title}}
              </a>
              â€¢
              <a class="comments-header-link" [routerLink]="'/community/' + findPost(postId)!.communityName">
                {{findPost(postId)!.communityName}}
              </a>
            </div>
            <div *ngFor="let comment of comments">
              <div *ngIf="comment.postId == postId && findPost(postId) !== undefined" class="comment" (click)="goToComment(comment)">
                <app-comment [comment]="comment"></app-comment>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </li>
  <li ngbNavItem *ngIf="!userIsDeleted && showTab()">
    <a ngbNavLink>Saved</a>
    <ng-template ngbNavContent>
      Content
    </ng-template>
  </li>
  <li ngbNavItem *ngIf="!userIsDeleted  && showTab()">
    <a ngbNavLink>Upvoted</a>
    <ng-template ngbNavContent>
      Content
    </ng-template>
  </li>
  <li ngbNavItem *ngIf="!userIsDeleted  && showTab()">
    <a ngbNavLink>Downvoted</a>
    <ng-template ngbNavContent>
      Content
    </ng-template>
  </li>
</ul>
<div class="container">
  <div *ngIf="!userIsDeleted" class="d-flex">
    <div id="deleted-user" class="flex-grow-1 me-lg-4">
      <div [ngbNavOutlet]="nav"></div>
    </div>
    <div class="sidebar">
      <div class="sticky-top">
        <app-user-sidebar *ngIf = "user" [user]="user"></app-user-sidebar>
      </div>
    </div>
  </div>
  <div *ngIf="userIsDeleted" class="d-flex align-items-center justify-content-center flex-column h-100">
    <img id="thoughtful-snoo" src="https://firebasestorage.googleapis.com/v0/b/socaly-eb5f5.appspot.com/o/static%2Fsnoo_thoughtful.png?alt=media&token=e9bace0b-05f5-4e0a-91d7-075b27d833b4"
    alt="image of thoughtful snoo" loading="lazy">
    <p id="deleted-user-message">This user deleted their account</p>
    <div>
      <button class="btn-primary" (click)="goHome()">Go home</button
      ></div>
  </div>
</div>
