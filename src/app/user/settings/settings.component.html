<ul ngbNav #nav="ngbNav" [activeId]="activeId" class="nav-tabs nav-fill" (navChange)="onChangeTab($event)">
  <li [ngbNavItem]="'account'">
    <a ngbNavLink>Account</a>
    <ng-template ngbNavContent class="h-100">
      <div class="settings-page">
        <h2>Account Settings</h2>
        <h4>Account preferences</h4>
        <div class="d-flex mb-2">
          <div>
            <h3>
              Email Address
            </h3>
            <p *ngIf="email" class="description">
              {{email}}
              <span *ngIf="!isEmailVerified">
                not verified!
                <button class="btn-resend-verification-email">Click here to resend</button>
              </span>
            </p>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <div>
              <button class="btn-secondary">
                Change
              </button>
            </div>
          </div>
        </div>
        <div class="d-flex">
          <div>
            <h3>
              Change password
            </h3>
            <p class="description">
              Password must be at least 8 characters long
            </p>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <div>
              <button class="btn-secondary">
                Change
              </button>
            </div>
          </div>
        </div>
        <h4>Delete account</h4>
        <div class="d-flex">
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <div>
              <button class="delete-account-button d-flex align-items-center">
                <span class="material-symbols-outlined delete-icon">
                  delete
                </span>
                <span class="delete-account-button-text">
                  Delete account
                </span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </li>
  <li [ngbNavItem]="'profile'">
    <a ngbNavLink>Profile</a>
    <ng-template ngbNavContent>
      <div class="settings-page">
        <h2>Customize Profile</h2>
        <h4>Profile information</h4>
        <div class="d-flex flex-column">
          <div>
            <h3>
              About (optional)
            </h3>
            <p class="description">
              A brief description of yourself shown on your profile.
            </p>
          </div>
          <div>
            <form [formGroup]="changeDescriptionForm" (ngSubmit)="changeDescription()">
              <textarea maxlength="255" (keyup)="countCharacters()" (keydown)="countCharacters()" [formControlName]="'description'" class="about-textarea" placeholder="About (optional)" rows="4"></textarea>
              <span [style.color]="availableCharacters == 0 ? 'red' : 'black'">{{availableCharacters}}</span>
              <span *ngIf="availableCharacters != 1" [style.color]="availableCharacters == 0 ? 'red' : 'black'"> Characters</span>
              <span *ngIf="availableCharacters == 1" class="black"> Character</span>
              <span [style.color]="availableCharacters == 0 ? 'red' : 'black'"> remaining</span>
              <div class="d-flex align-items-center justify-content-end flex-grow-1">
                <div>
                  <button type="submit" class="btn-primary">
                    Save
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <h4>Images</h4>
        <div class="d-flex flex-column">
          <div>
            <h3>
              Profile image and banner
            </h3>
            <p class="description">
              Images must be .png or .jpg format
            </p>
          </div>
          <div class="d-flex flex-row user-images">
            <div>
              <img class="user-profile-image" src="{{this.user.profileImage}}" alt="user profile image"/>

              <div class="lds-dual-ring profile-image-loading-wheel-position" *ngIf="isProfileImageUploading"></div>
              <input type="file" id="profile-image-upload" accept=".png,.pjp,.jpg,.pjpeg,.jpeg,.jfif"
                     (change)="changeProfileImage($event)" hidden/>
              <label for="profile-image-upload" class="material-symbols-outlined me-1 change-profile-image-button">
                add_a_photo
              </label>
            </div>
            <div class="ms-3">
              <img class="user-profile-banner" src="{{this.user.profileBanner}}" alt="user profile banner"/>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </li>
  <li [ngbNavItem]="'feed'">
    <a ngbNavLink>Feed Settings</a>
    <ng-template ngbNavContent>
      <div class="settings-page">
        <h2>Feed Settings</h2>
        <h4>Content preferences</h4>
        <div class="d-flex mb-2">
          <div>
            <h3>
              Community content sort
            </h3>
            <p class="description">
              Choose how you would like content organized in communities you visit. This will not affect global feeds
              such as Home, or Popular.
            </p>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1" ngbDropdown placement="bottom-end">
            <button id="contentSortDropdown" ngbDropdownToggle class="feed-sort-dropdown-menu-toggle form-select">
              <span *ngIf='isHot()' class="d-flex align-items-center">
                <span class="material-symbols-outlined">
                  local_fire_department
                </span>
                <span class="ms-1">
                  hot
                </span>
              </span>
              <span *ngIf="isNew()" class="d-flex align-items-center">
                <span class="material-symbols-outlined">
                  brightness_empty
                </span>
                <span class="ms-1">
                  new
                </span>
              </span>
              <span *ngIf="isTop()" class="d-flex align-items-center">
                <span class="material-symbols-outlined">
                  leaderboard
                </span>
                <span class="ms-1">
                  top
                </span>
              </span>
            </button>
            <div ngbDropdownMenu aria-labelledby="contentSortDropdown" class="feed-sort-dropdown-menu">
              <button ngbDropdownItem class="d-flex align-items-center feed-sort-button" (click)="changeCommunityContentSort(SortingType.HOT)">
                <span class="material-symbols-outlined">
                  local_fire_department
                </span>
                <span class="ms-1">
                  hot
                </span>
              </button>
              <div class="dropdown-divider"></div>
              <button ngbDropdownItem class="d-flex align-items-center feed-sort-button" (click)="changeCommunityContentSort(SortingType.NEW)">
                <span class="material-symbols-outlined">
                  brightness_empty
                </span>
                <span class="ms-1">
                  new
                </span>
              </button>
              <div class="dropdown-divider"></div>
              <button ngbDropdownItem class="d-flex align-items-center feed-sort-button" (click)="changeCommunityContentSort(SortingType.TOP_TODAY)">
                <span class="material-symbols-outlined">
                  leaderboard
                </span>
                <span class="ms-1">
                  top
                </span>
              </button>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-end" ngbDropdown placement="bottom-end" *ngIf="isTop()">
            <button id="contentSortDropdownDuration" ngbDropdownToggle class="feed-sort-dropdown-menu-toggle form-select">
              <span *ngIf='isTopToday()' class="d-flex align-items-center">
                <span class="ms-1">
                  today
                </span>
              </span>
              <span *ngIf="isTopWeek()" class="d-flex align-items-center">
                <span class="ms-1">
                  week
                </span>
              </span>
              <span *ngIf="isTopMonth()" class="d-flex align-items-center">
                <span class="ms-1">
                  month
                </span>
              </span>
              <span *ngIf="isTopYear()" class="d-flex align-items-center">
                <span class="ms-1">
                  year
                </span>
              </span>
              <span *ngIf="isTopAllTime()" class="d-flex align-items-center">
                <span class="ms-1">
                  all time
                </span>
              </span>
            </button>
            <div ngbDropdownMenu aria-labelledby="contentSortDropdownDuration" class="feed-sort-dropdown-menu">
              <button ngbDropdownItem class="d-flex align-items-center feed-sort-button" (click)="changeCommunityContentSort(SortingType.TOP_TODAY)">
                <span class="ms-1">
                  today
                </span>
              </button>
              <div class="dropdown-divider"></div>
              <button ngbDropdownItem class="d-flex align-items-center feed-sort-button" (click)="changeCommunityContentSort(SortingType.TOP_WEEK)">
                <span class="ms-1">
                  week
                </span>
              </button>
              <div class="dropdown-divider"></div>
              <button ngbDropdownItem class="d-flex align-items-center feed-sort-button" (click)="changeCommunityContentSort(SortingType.TOP_MONTH)">
                <span class="ms-1">
                  month
                </span>
              </button>
              <div class="dropdown-divider"></div>
              <button ngbDropdownItem class="d-flex align-items-center feed-sort-button" (click)="changeCommunityContentSort(SortingType.TOP_YEAR)">
                <span class="ms-1">
                  year
                </span>
              </button>
              <div class="dropdown-divider"></div>
              <button ngbDropdownItem class="d-flex align-items-center feed-sort-button" (click)="changeCommunityContentSort(SortingType.TOP_ALL_TIME)">
                <span class="ms-1">
                  all time
                </span>
              </button>
            </div>
          </div>
        </div>

        <div class="d-flex mb-2">
          <div>
            <h3>
              Remember per community
            </h3>
            <p class="description">
              Enable if you would like each community to remember and use the last content sort you selected for that community.
            </p>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <label class="switch">
              <input type="checkbox" [checked]="userSettings.rememberLastCommunityContentSort">
              <span class="slider round"></span>
            </label>
          </div>
        </div>

        <div class="d-flex mb-2">
          <div>
            <h3>
              Community themes
            </h3>
            <p class="description">
              Use custom themes for all communities. You can also turn this off on a per community basis.
            </p>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <label class="switch">
              <input type="checkbox" [checked]="userSettings.useCustomCommunityThemes">
              <span class="slider round"></span>
            </label>
          </div>
        </div>

        <div class="d-flex mb-2">
          <div>
            <h3>
              Open posts in new tab
            </h3>
            <p class="description">
              Enable to always open posts in a new tab.
            </p>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <label class="switch">
              <input type="checkbox" [checked]="userSettings.openPostsInNewTab" (change)="changeOpenPostsInNewTab()">
              <span class="slider round"></span>
            </label>
          </div>
        </div>
      </div>
    </ng-template>
  </li>
  <li [ngbNavItem]="'emails'">
    <a ngbNavLink>Emails</a>
    <ng-template ngbNavContent>
      <div class="settings-page">
        <h2>Manage Emails</h2>
        <h4>Activity</h4>
        <div class="d-flex mb-2">
          <div>
            <h3>
              Comments on your posts
            </h3>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <label class="switch">
              <input type="checkbox" [checked]="userSettings.postCommentEmails">
              <span class="slider round"></span>
            </label>
          </div>
        </div>

        <div class="d-flex mb-2">
          <div>
            <h3>
              Replies to your comments
            </h3>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <label class="switch">
              <input type="checkbox" [checked]="userSettings.commentReplyEmails">
              <span class="slider round"></span>
            </label>
          </div>
        </div>

        <div class="d-flex mb-2">
          <div>
            <h3>
              Upvotes on your posts
            </h3>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <label class="switch">
              <input type="checkbox" [checked]="userSettings.postUpVoteEmails">
              <span class="slider round"></span>
            </label>
          </div>
        </div>

        <div class="d-flex mb-2">
          <div>
            <h3>
              Upvotes on your comments
            </h3>
          </div>
          <div class="d-flex align-items-center justify-content-end flex-grow-1">
            <label class="switch">
              <input type="checkbox" [checked]="userSettings.commentUpVoteEmails">
              <span class="slider round"></span>
            </label>
          </div>
        </div>
      </div>
    </ng-template>
  </li>
</ul>
<div class="container">
  <div class="d-flex">
    <div class="flex-grow-1">
      <div [ngbNavOutlet]="nav"></div>
    </div>
  </div>
</div>
